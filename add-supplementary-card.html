<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="style.css">
	<title>Add Supplementary Card</title>
</head>

<body>
	<div class="container bg-primary">
		<div class="row">
			<div class="col-12 pt-5 pb-5">
				<a href="index.html"><img src="images/back-arrow.png" class="mt-3 position-absolute " alt=""></a>
				<img src="images/supplementary_card.png" class="d-block m-auto" alt="">
			</div>
		</div>

		<div class="row">
			<div class="content w-100">
				<h2 class="mt-2 mb-4">Add Supplementary Card</h2>
				<form id="supplemantry-card-form">

					<div class="loan-lists">
						<div class="loan-list position-relative card1">
							<div class="card-button-group">
								<div class="add-icon"><img src="images/duplicate.png" class="d-block m-auto" alt=""></div>
								<!-- <div class="remove-icon"><img src="images/remove.png" class="d-block m-auto" alt=""></div> -->
	
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 form-group">
								<label for="exampleFormControlInput1">Full Name</label>
								<input class="form-control form-control-lg" name="fullName" required type="text">
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 form-group">
								<label for="exampleFormControlInput1">CNIC Number</label>
								<input class="form-control form-control-lg" required name="CNICNumber" type="text">
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 form-group">
								<div class="form-group  mb-0">
									<label for="exampleFormControlFile1">CNIC Front</label>
									<input type="file" class="form-control-file" required name="CNICFrontScan" id="exampleFormControlFile1">
								</div>
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 ">
								<div class="form-group mb-0">
									<label for="exampleFormControlFile1">CNIC Back</label>
									<input type="file" class="form-control-file" required name="CNICBackScan" id="exampleFormControlFile1">
								</div>
							</div>
						</div>

					</div>

					<div class=" text-center mt-4">
						<button type="submit" class="btn btn-primary btn-lg pl-5 pr-5">CONFIRM</button>
						<!-- href="terms-conditions.html" -->
					</div>

				</form>
			</div>
		</div>




		<!-- Optional JavaScript; choose one of the two! -->

		<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
		<script src="js/jquery.slim.min.js"></script>
		<script src="js/bootstrap.bundle.min.js"></script>

		<!-- Option 2: Separate Popper and Bootstrap JS -->
		<!--
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
    -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

		<script>
			$(document).ready(function () {
				$(document).on('click', ".add-icon", function () {
					let len = $('.loan-lists').children().length
					if(len < 6){
						$('.loan-lists').append(`<div class="loan-list position-relative card${len+1}">
							<div class="card-button-group">
								<div class="add-icon"><img src="images/duplicate.png" class="d-block m-auto" alt=""></div>
								<div class="remove-icon"><img src="images/remove.png" class="d-block m-auto" alt=""></div>
	
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 form-group">
								<label for="exampleFormControlInput1">Full Name</label>
								<input class="form-control form-control-lg" name="fullName" required type="text">
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 form-group">
								<label for="exampleFormControlInput1">CNIC Number</label>
								<input class="form-control form-control-lg" required name="CNICNumber" type="text">
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 form-group">
								<div class="form-group  mb-0">
									<label for="exampleFormControlFile1">CNIC Front</label>
									<input type="file" class="form-control-file" required name="CNICFrontScan" id="exampleFormControlFile1">
								</div>
							</div>
							<div class="col-12 col-sm-6 mt-xs-10 ">
								<div class="form-group mb-0">
									<label for="exampleFormControlFile1">CNIC Back</label>
									<input type="file" class="form-control-file" required name="CNICBackScan" id="exampleFormControlFile1">
								</div>
						</div>`)

					}
					else{
						alert("No More Card Allowed")
					}
				});

				$(document).on('click', ".remove-icon", function () {
					$(this).parent().parent().remove();
				})
				$("#supplemantry-card-form").submit((e)=>{
					e.preventDefault();
					let len = $('.loan-lists').children().length

					let supplemant_card_list = []
					let i = 0
					while (i < len) {
						let index = i+1
						let currentElement = $(".loan-lists").children(".card"+index).find("input")
						let inputLength =  currentElement.length
						let obj = {}

						let inputIndex = 0
						while (inputIndex < inputLength) {
							obj = { ...obj,[currentElement[inputIndex].name]:currentElement[inputIndex].type ==="file" ?currentElement[inputIndex].files[0] :  currentElement[inputIndex].value, }							
							inputIndex++;
						}
						supplemant_card_list.push(obj)
						i++;

					}

					// const formData = new FormData();



					console.log(supplemant_card_list);

				})
			});
		</script>


</body>

</html>